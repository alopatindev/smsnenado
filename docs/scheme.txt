ReportSpamActivity
    if /*sender+phone not in blacklist OR*/
       sender+phone lastReportDate - currentDate >= 7 days
        setInInternalQueueMessage
    else
        show error

updateInternalQueue
    foreach item of queue:
        if status == in_internal_queue:
            update status to in_internal_queue_sent_report
            reportSpam

onReportSpamOK(orderId, msgId)
    update status to internal_queue_waiting_confirmation

SmsReceiver.onReceive
    if confirmation sms
        BootService.onReceiveConfirmation(code, orderId, msgId?)
            if status == internal_queue_waiting_confirmation:
                update status to internal_queue_sent_confirmation
                API.confirmReport(orderId, code, msgId)

on any fail(msgId):
    update status to internal_queue

onConfirmReportOK(msgId)
    remove from queue
    update blacklist last_report_time
    request status
